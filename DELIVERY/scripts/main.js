var Math2={};Math2.randomInt=function(e,t){return t+=1,Math.floor(Math.random()*(t-e)+e)},Math2.formatTime=function(e){var t,n=0,i=0;return t=Math.floor(e/100),t>=60&&(n=Math.floor(t/60)),i=t-60*n,10>i&&(i="0"+i),n+":"+i},function(e){function t(){if(g=document.getElementById("game-container"),GAME.width=800,GAME.height=480,Modernizr.canvas){var e=document.getElementById("video");e.addEventListener("click",function(){e.play()},!1),i()}else $("#loader").css("display","none"),$("#game-container").css("display","none"),$("#no-canvas").css("display","block"),$("#wrapper").addClass("no-canvas-bg")}function n(){if(GAME.isMobile)if(e.innerWidth>e.innerHeight){var t=e.innerWidth,n=e.innerHeight,i=n/480;if(d){var r=d.view.renderer.view;r.style.height=480*i+"px";var o=t/i;r.style.width=t+"px",d.view.resize(o,480)}GAME.width=t/i,GAME.height=480}else if(GAME.width=800,GAME.height=480,d){var r=d.view.renderer.view;r.style.height="480px",r.style.width="800px",d.view.resize(800,480)}}function i(){f=new PIXI.AssetLoader(x),f.onComplete=s,f.load(),audioloader=new createjs.LoadQueue,audioloader.installPlugin(createjs.Sound),audioloader.onComplete=o,audioloader.onFileLoad=r,audioloader.loadManifest(v)}function r(e){m[e.item.id]=e.result}function o(){GAME.audio_assets=m,y++,l()}function s(){y++,l()}function a(){y++,l()}function l(){y>=3&&c()}function c(){GAME.LOCALISED=m["game-copy"].copy,/iPhone|iPod|iPad|Android/i.test(navigator.userAgent)&&(GAME.isMobile=!0,$("#wrapper").addClass("mobile"),$("#float").addClass("mobile"),$("#content-container").addClass("mobile"),$("#trailer-container").addClass("mobile")),/Firefox/i.test(navigator.userAgent)&&(GAME.isFireFox=!0),$("#loader").css("display","none"),d=new GAME.Engine,g.appendChild(d.view.renderer.view),GAME.LO_MODE?setInterval(p,25):requestAnimFrame(p),$(document).keydown(function(e){32==e.keyCode&&(e.preventDefault(),GAME.onTouch())}),d.view.renderer.view.addEventListener("touchstart",u,!0),d.view.renderer.view.addEventListener("touchend",h,!0),$("#close-button").mousedown(function(){GAME.closeTrailer()}),n()}function u(e){e.preventDefault(),onTouch()}function h(e){e.preventDefault()}function p(){d.update(),GAME.LO_MODE||requestAnimFrame(p)}var f,d,g,m=[],y=0,x=["assets/sprites/interface.json","assets/sprites/background.json","assets/sprites/town_platforms.json","assets/sprites/canyon_platforms.json","assets/sprites/town_bg.json","assets/sprites/indian_bg.json","assets/sprites/obstacles_desert.json","assets/sprites/obstacles_town.json","assets/sprites/horses_complete_75percent.json","assets/sprites/train_complete.json","assets/sprites/carriage_reflections.json"],v=[{src:"assets/audio/game_intro_coup_de_grace_v1.mp3|assets/audio/game_intro_coup_de_grace_v1.ogg",id:"intro-music"},{src:"assets/audio/game_failed_black_mask_v1.mp3|assets/audio/game_failed_black_mask_v1.ogg",id:"failed-music"},{src:"assets/audio/gameplay_coup_de_grace_v1.mp3|assets/audio/gameplay_coup_de_grace_v1.ogg",id:"game-music"},{src:"assets/audio/game_complete_black_mask_v1.mp3|assets/audio/game_complete_black_mask_v1.ogg",id:"complete-music"},{src:"assets/audio/game_over_impact_coup_de_grace_v1.mp3|assets/audio/game_over_impact_coup_de_grace_v1.ogg",id:"gameover-sound"},{src:"assets/localisation/copy.json",id:"game-copy"}];WebFontConfig={google:{families:["Anton::latin","Titillium+Web:600italic,700italic:latin"]},active:function(){a()}},function(){var e=document.createElement("script");e.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",e.type="text/javascript",e.async="true";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),$(document).ready(t),$(e).resize(n),e.onorientationchange=n,GAME.onTouch=function(){$(e).focus(),d&&d.onTouch()},GAME.openTrailer=function(){if(!GAME.trailerOpen){GAME.trailerOpen=1,d&&(d.soundManager.isMute||(GAME.wasUnMute=1,d.soundManager.mute())),GAME.pause=1;var t=document.getElementById("video");GAME.isMobile&&($("video")[0].width=e.innerWidth,$("video")[0].height=e.innerHeight-200),t.play(),$("#trailer-container").css("display","block")}},GAME.closeTrailer=function(){GAME.trailerOpen&&(GAME.trailerOpen=0,GAME.pause=0,$("video")[0].pause(),$("#trailer-container").css("display","none"),d&&GAME.wasUnMute&&(d.soundManager.unmute(),GAME.wasUnMute=0))}}(window);